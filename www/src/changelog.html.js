const { htmlTemplate } = await import(`./_htmlTemplate.js?${Date.now()}`)
const { js } = await import(`./_syntaxHighlight.js?${Date.now()}`)

// language=html
export default () => htmlTemplate({
	head: `
		<title>Changelog</title>
		<link href="/changelog.css" rel="stylesheet" />
	`,
	body: `
		<h1 id="changelog">Changelog</h1>
		<br />

		<p>12.3.0 dashboard: click drag</p>
		<div class="RegionImg" data-max-width="440">
			<video src="/assets/media/12.3.0-click-drag.mp4" autoplay loop controls>
		</div>
		
		<p>12.2.0 dashboard: settings menu to doc link</p>
		<p>12.1.0 dashboard: layout redesign</p>
		<p><strong>12.0.0 breaking change.</strong> The Dashboard is no longer supported in Safari.
			It’s supported in Chrome and Firefox 147+.
		</p>

		<hr>
		<p>11.4.0 dashboard: delay jitter field</p>
		<p>11.3.0 website</p>
		<p>11.2.0 dashboard: show Mockaton’s version</p>
		<div class="RegionImg" data-max-width="200">
			<img src="/assets/media/11.2.0-version.avif" alt="">
		</div>

		<p>11.1.0 new <code>config.watcherEnabled</code></p>
		<p><strong>11.0.0 breaking change</strong>, but of undocumented APIs.
		<ul>
			<li>
				If you use the Mockaton’s API directly (without the <a href="/api">Commander
				API</a> client), update the request payloads from JSON objects to
				positional JSON arrays, see the mentioned client for the updated contracts.
			</li>
			<li>
				If you use the <code>GET /mockaton/state</code> API, broker objects are
				now flat. There’s no <code>currentMock</code> object wrapping them.
			</li>
		</ul>
		</p>

		<hr>

		<p>10.7.0 dashboard: newly added mocks are animated in</p>
		<div class="RegionImg">
			<img src="/assets/media/10.7.0-newly-added-anim.gif" alt="">
		</div>

		<p>10.6.0 dashboard: arrow navigation</p>
		<div class="RegionImg">
			<img src="/assets/media/10.6.0-arrow-nav.gif" alt="">
		</div>

		<p>10.5.0 dashboard: qs option <code>?groupByMethod=false</code></p>
		<p>10.4.0 Allow changing delay with wheel event</p>
		<p>10.3.1 Add separators to bulk selector and don’t expose internally used comment for autogenerated 500</p>
		<p>10.3.0 New api <code>commander.toggle500(method, route)</code></p>
		<p>10.2.0 Reject malicious URLs</p>
		<p>10.1.0 dashboard: toggle delay with click-drag</p>
		<div class="RegionImg" data-max-width="400">
			<img src="/assets/media/10.1.0-click-drag-toggle.gif" alt="">
		</div>

		<p><strong>10.0.0 breaking change</strong>: <code>Mockaton</code> constructor is now async.
			So if you launch it programmatically, change:

			${js`
Mockaton()
// to
await Mockaton()
				`}
		</p>

		<hr>

		<p>9.6.0 dashboard: persist <code>groupByMethod</code> preference in localStorage</p>
		<p>9.5.0 cli: new <code>config.logLevel=verbose</code></p>
		<p>9.4.0 dashboard: users can resize panels</p>
		<div class="RegionImg">
			<img src="/assets/media/9.4.0-resize-panels.gif" alt="">
		</div>

		<p>9.3.0 Handle head requests for get mocks</p>
		<p>9.2.0 dashboard: syntax highlight more xml files (such as html)</p>
		<p>9.1.0 cli: new flag: <code>--no-open</code></p>
		<p>
			<strong>9.0.0 breaking change</strong>: Commander’s GET APIs
			have been consolidated into <code>commander.getState()</code>.
			These were undocumented APIs, so you are likely not affected.
		</p>

		<hr>

		<p>8.27.0 dashboard: group by method checkbox</p>
		<div class="RegionImg">
			<img src="/assets/media/8.27.0-group-by-method.gif" alt="">
		</div>

		<p>8.26.0 UI simplify mock-selector label text</p>
		<p>8.25.0 <code>--quiet</code> and <code>config.logLevel</code> options</p>
		<p>8.24.0 Show ISO date in logs and log static file dispatch</p>
		<p>8.23.0 cli</p>
		<p>8.22.0 XML syntax highlight</p>
		<p>8.21.0 Responsive mock list</p>
		<p>8.19.0 Move puppeteer and pixaton to devDeps</p>
		<p>8.18.0 CORS. allow <code>’authorization’</code> header by default</p>
		<p>8.17.0 Conditionally render proxy toggler</p>
		<p>8.16.0 Watch static mocks dir</p>
		<p>8.15.0 Add <code>config.delayJitter</code></p>
		<p>8.14.0 Static files controls</p>
		<p>8.13.0 dashboard: dim repeated dirs</p>
		<div class="RegionImg" data-max-width="460">
			<img src="/assets/media/8.13.0-ditto-dirs.avif" alt="">
		</div>

		<p>8.12.0 Add <code>config.formatCollectedJSON</code></p>
		<p>8.11.0 Allow all the HTTP methods Node.js supports</p>
		<p>8.10.0 dashboard: global delay field</p>
		<p>8.9.0 Long poll Add or Remove mocks</p>
		<p>8.8.0 Allow proxying individual routes</p>
		<p>8.7.0 dashboard: highlights and previews 500 mocks when checking the 500 toggler</p>
		<p>8.6.0 dashboard: save proxied checkbox</p>
		<p>8.5.0 Add demo-app-vite</p>
		<p>8.4.0 Auto register/unregister mocks</p>
		<p>8.3.0 <code>config.collectProxied</code></p>
		<p>8.2.0 Allow changing proxy fallback server from UI</p>
		<p>8.1.0 Describe http status code in payload viewer title</p>
		<p>
			<strong>8.0.0 breaking change</strong>: <code>config.plugins</code>
			are no longer an Object. Now they are an Array and the test
			is now a regex. So if you use custom plugins, change e.g.:
		</p>
		${js`
plugins = {
  '.js': jsToJsonPlugin,
  '.ts': jsToJsonPlugin
}
// to
plugins = [
  [/\\.(js|ts)$/, jsToJsonPlugin], // Default 
]
`}

		<hr />


		<p>7.8.0 Support userland plugins</p>
		<p>7.7.0 TypeScript mocks support</p>
		<p>7.6.0 Render list of static files</p>
		<p>7.5.0 Allowing previewing mock images</p>
		<p>7.4.0 Progress bar for payload viewer</p>
		<p>7.3.0 Allow CORS Checkbox</p>
		<p>7.2.0 Add content-type as default header when allowing cors</p>
		<p>7.1.0 CORS support</p>
		<p>
			<strong>7.0.0 breaking change</strong>: Split <code>PATCH mockaton/edit</code>
			into <code>selectMock</code> and <code>setRouteIsDelayed</code>. So instead of:
		</p>

		${js`
fetch(addr + '/mockaton/edit', {
  method: 'PATCH',
  body: JSON.stringify({
    file: 'api/foo.200.GET.json',
    delayed: true // optional
  })
})

// change it to
await commander.select('api/foo.200.GET.json')
await commander.setMockIsDelayed('api/foo.200.GET.json', true)
`}

		<hr>

		<p>6.4.0 Default mock could be selected with the comment <code>(default)</code></p>
		<p>6.3.0 <code>422</code> when trying to change a mock that doesn’t exist on a route that has mocks</p>
		<p>6.4.0 No partial comment search</p>
		<p>6.3.0 Allow extending the mime list</p>
		<p>6.2.0 Add <code>config.ignore</code> regex</p>
		<p>6.1.0 remove <code>config.allowedExt</code></p>
		<p>
			<strong>6.0.0 breaking change</strong>: Remove
			feature for using .md files for documentating APIs
		</p>

		<hr>

		<p><strong>5.0.0 breaking change</strong>: .md files no longer use status code in the extension</p>

		<hr>
		<p><strong>4.0.0 breaking change</strong>: rename <code>config.open</code> to <code>config.onReady</code></p>

		<hr>
		<p><strong>3.0.0 breaking change</strong>: <code>config.skipOpen</code> boolean to <code>config.open</code> function</p>

		<hr>

		<p>2.2.0 Allow injecting <code>extraHeaders</code></p>
		<p>2.1.0 Make auto-generate 500’s configurable</p>
		<p><strong>2.0.0 breaking change</strong>: Transforms no longer get a mock</p>

		<hr>

		<p>1.1.0 Allow writing JSON mocks in JS</p>
	`
})
