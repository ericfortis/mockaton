const { htmlTemplate } = await import(`./_htmlTemplate.js?${Date.now()}`)
const { shell, raw } = await import(`./_syntaxHighlight.js?${Date.now()}`)

// language=html
export default () => htmlTemplate({
	head: `<title>Mockaton</title>`,
	body: `
		<h1 id="overview">Overview</h1>
		<p>
			Mockaton is an HTTP mock server for simulating APIs with minimal setup
			â€” ideal for testing difficult to reproduce backend states.
		</p>

		<h2>Convention</h2>
		<p>
			Thereâ€™s no need to write code for wiring up your mocks. A given directory is
			scanned for filenames following a convention similar to the URLs. For example,
			for <span class="NullLink">/api/user/123</span>, the filename could be:
		</p>

		${raw(`
my-mocks-dir/<strong>api/user</strong>/[id].GET.200.json
`)}


		<h2 id="quick-start-docker-">Quick Start (Docker)</h2>
		<p>
			This will spin up Mockaton with the sample directories
			included in the repository mounted on the container.
		</p>

		${shell`
git clone https://github.com/ericfortis/mockaton.git --depth 1
cd mockaton
make docker
`}


		<h2 id="dashboard">Dashboard</h2>
		<div class="RegionImg">
			<picture>
				<source media="(prefers-color-scheme: light)" srcset="media/pic-for-readme.vp761x740.light.gold.png">
				<source media="(prefers-color-scheme: dark)" srcset="media/pic-for-readme.vp761x740.dark.gold.png">
				<img alt="Mockaton Dashboard" src="media/pic-for-readme.vp761x740.light.gold.png">
			</picture>
		</div>
		
		<p>On the dashboard you can:</p>
		<ul>
			<li>Select a mock variant for a particular route</li>
			<li>Delay responses ðŸ•“</li>
			<li>
				Trigger an autogenerated <code>500</code> error,
				and cycle it off (for testing retries)
			</li>
			<li>â€¦among other features</li>
		</ul>
		<p>
			Nonetheless, thereâ€™s a programmatic API, which is handy for
			setting up tests (see <a href="/api">Control&nbsp;API</a>).
		</p>


		<h2 id="multiple-mock-variants">Multiple Mock Variants</h2>
		<p>
			Each route can have different mocks. There are two
			options for doing that, and they can be combined.
		</p>

		<h3 id="adding-comments-to-the-filename">Adding Comments to the Filename</h3>
		<p>Comments are anything within parentheses, including them.</p>
		<pre>
api/login<strong>(locked out user)</strong>.POST.423.json
api/login<strong>(invalid login attempt)</strong>.POST.401.json
</pre>

		<p>
			You can <strong>Bulk Select</strong> mocks by comments to simulate the complete states
			you want. For example:
		</p>

		<div class="RegionImg">
			<img src="media/bulk-select.png" alt="">
		</div>


		<h3 id="different-response-status-code">Different Response Status Code</h3>
		<p>
			For instance, you can use a <code>4xx</code> or <code>5xx</code>
			status code for triggering error responses, or a <code>2xx</code>
			such as <code>204</code> for testing empty collections.
		</p>

		${raw(`
api/videos.GET.<strong>204</strong>.empty <span class="syntax_comment"># No Content</span>
api/videos.GET.<strong>403</strong>.json  <span class="syntax_comment"># Forbidden</span>
api/videos.GET.<strong>500</strong>.txt   <span class="syntax_comment"># Internal Server Error</span>
`)}
		</body>
		</html>
	`
})
